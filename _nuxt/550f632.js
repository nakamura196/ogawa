(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{490:function(e,t,n){"use strict";n.r(t);n(34),n(18),n(25),n(40),n(32),n(5),n(41),n(47),n(33);var r=n(19);n(70),n(26),n(75),n(38),n(206),n(49),n(27),n(65);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){d=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(d)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var l={components:{network:n(466).a},props:{id:{type:String,require:!0,default:""}},data:function(){return{isLemma:!0,sortMethod:"directed",hierarchical:!1,physicsEnabled:!0,orgNodes:[],orgEdges:[],nodes:[],edges:[],nodesMap:{}}},computed:{options:function(){var e=!1;return this.hierarchical&&(e={sortMethod:this.sortMethod}),{edges:{length:400},layout:{randomSeed:2,hierarchical:e},physics:{enabled:this.physicsEnabled}}}},watch:{isLemma:function(){this.drawNetwork()},id:function(){this.getRelatedFactoids()}},mounted:function(){this.getRelatedFactoids()},methods:{getRelatedFactoids:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,c,l,data,d,f,h,m,y,v,_,x,w,E,j,k,i,C,R,F,I,O,N,L,S,M,A;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,"https://dydra.com/junjun7613/romanfactoid_v3/sparql",r="prefix ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n      prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n      SELECT * WHERE {\n        ?s ex:description ?desc_s .\n        OPTIONAL {\n          ?s ?related_so ?s_o .\n          {\n            ?s_o ex:referencesEntityInContext ?entityInContext_s; ex:referencesEntity ?referencesEntity_s .\n          }\n          UNION\n          {\n            ?s_o ex:referencesEntity ?referencesEntity_s .\n          }\n          ?referencesEntity_s ex:name ?referencesEntityName_s; rdf:type ?referencesEntityType_s\n        }\n        OPTIONAL {\n          ?s ?p ?o .\n          ?o a/rdfs:subClassOf* ex:Factoid .\n          ?o ex:description ?desc_o .\n          OPTIONAL {\n            ?o ?related_oo ?o_o .\n            {\n              ?o_o ex:referencesEntityInContext ?entityInContext_o; ex:referencesEntity ?referencesEntity_o .\n            }\n            UNION\n            {\n              ?o_o ex:referencesEntity ?referencesEntity_o .\n            }\n            ?referencesEntity_o ex:name ?referencesEntityName_o; rdf:type ?referencesEntityType_o\n          }\n        }\n        filter (?s = <".concat(n,"> || ?o = <").concat(n,">)\n      }"),c="".concat("https://dydra.com/junjun7613/romanfactoid_v3/sparql","?query=").concat(encodeURIComponent(r)),t.next=6,e.$axios.get(c);case 6:l=t.sent,data=l.data,d={},f={},h=o(data),t.prev=11,h.s();case 13:if((m=h.n()).done){t.next=59;break}y=m.value,v=0,_=["s","o"];case 17:if(!(v<_.length)){t.next=56;break}if(x=_[v],w=y["referencesEntity_".concat(x)]){t.next=22;break}return t.abrupt("continue",53);case 22:for(E=y[x],j=y["desc_".concat(x)],k=[],20,i=0;i<j.length/20;i++)k.push(j.substr(20*i,20));if(d[E]||(d[E]={id:E,label:k.join("\n"),shape:"box",color:{background:"white"},type:"factoid"}),d[w]){t.next=49;break}C=null,R=null,F=y["referencesEntityType_".concat(x)],t.t0=F,t.next="https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Location"===t.t0?35:"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#Community"===t.t0?37:"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#ConceptualObject"===t.t0?40:"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#PhysicalObject"===t.t0?43:"https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Group"===t.t0?46:48;break;case 35:return C="#98fb98",t.abrupt("break",48);case 37:return C="red",R="square",t.abrupt("break",48);case 40:case 43:return C="yellow",R="diamond",t.abrupt("break",48);case 46:return C="orange",t.abrupt("break",48);case 48:d[w]={id:w,label:y["referencesEntityName_".concat(x)],color:C,shape:R,type:F};case 49:!(I=d[w]).context&&y["entityInContext_".concat(x)]&&(I.context=y["entityInContext_".concat(x)]),O="".concat(E,"-").concat(w),f[O]={from:E,to:w,arrows:"to",color:"gray"};case 53:v++,t.next=17;break;case 56:y.p&&!["https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#mentionedAsFollow"].includes(y.p)&&(f["".concat(y.s,"-").concat(y.o)]={from:y.s,to:y.o,label:e.$utils.getIdFromUri(y.p,"#"),arrows:"to",color:"gray"});case 57:t.next=13;break;case 59:t.next=64;break;case 61:t.prev=61,t.t1=t.catch(11),h.e(t.t1);case 64:return t.prev=64,h.f(),t.finish(64);case 67:return t.next=69,e.getAssociatedObjects(d,f);case 69:for(S in N=t.sent,d=N.nodesMap,f=N.edgesMap,L=[],d)L.push(d[S]);for(A in M=[],f)M.push(f[A]);e.orgEdges=M,e.orgNodes=L,e.nodesMap=d,e.drawNetwork();case 80:case"end":return t.stop()}}),t,null,[[11,61,64,67]])})))()},drawNetwork:function(){var e,t=this.orgEdges,n=this.orgNodes,r=[],c=[],l=[],d=this.isLemma,f=o(n);try{for(f.s();!(e=f.n()).done;){var h=e.value;(d||"lemma"!==h.type)&&(r.push(h),l.push(h.id))}}catch(e){f.e(e)}finally{f.f()}var m,y=o(t);try{for(y.s();!(m=y.n()).done;){var v=m.value,_=v.from,x=v.to;l.includes(_)&&l.includes(x)&&c.push(v)}}catch(e){y.e(e)}finally{y.f()}this.nodes=r,this.edges=c},getAssociatedObjects:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var c,l,filter,d,f,h,data,m,y,v,_,x,w,E,j,k,C,label;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(l in c=[],e)"factoid"===e[l].type&&c.push("?s = <".concat(l,">"));return filter=c.join(" || "),"https://dydra.com/junjun7613/romanfactoid_v3/sparql",d="prefix ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n      prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n      SELECT * WHERE {\n        ?s ex:associatedObject ?ao . ?ao ex:hasLemma/ex:referencesLemma ?lemma .\n        filter (".concat(filter,")\n        SERVICE SILENT <https://dydra.com/i2k/lemmabank/sparql> {\n          ?lemma rdfs:label ?label .\n        }\n      }"),f="".concat("https://dydra.com/junjun7613/romanfactoid_v3/sparql","?query=").concat(encodeURIComponent(d)),r.next=8,n.$axios.get(f);case 8:h=r.sent,data=h.data,m={},y=o(data);try{for(y.s();!(v=y.n()).done;)_=v.value,x=_.label,w=_.ao,E=_.s,m[E]||(m[E]={}),m[E][w]||(m[E][w]=[]),m[E][w].includes(x)||m[E][w].push(x)}catch(e){y.e(e)}finally{y.f()}for(j in m)for(k in m[j])(C=m[j][k]).sort(),label=C.join(" / "),e[label]||(e[label]={id:label,label:label,color:"pink",shape:"box",type:"lemma"}),t["".concat(j,"-").concat(label)]={from:j,to:label,arrows:"to",color:"gray"};return r.abrupt("return",{nodesMap:e,edgesMap:t});case 15:case"end":return r.stop()}}),r)})))()},onNodeSelected:function(e){var t=e.nodes;if(t.length>0){var n=t[0],r=this.nodesMap[n];if("factoid"===r.type)this.$router.push(this.localePath({name:"item-id",params:{id:this.$utils.getIdFromUri(r.id).replace("fact_","")}}));else{if(!r.context)return void alert("contextがありません。");this.$router.push(this.localePath({name:"entity-id",params:{id:this.$utils.getIdFromUri(r.context)}}))}}}}},d=n(96),f=n(130),h=n.n(f),m=n(217),y=n(633),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("network",{ref:"network",staticClass:"mt-5",staticStyle:{width:"100%",height:"500px","background-color":"lightyellow"},attrs:{id:"mynetwork",nodes:e.nodes,edges:e.edges,options:e.options},on:{click:e.onNodeSelected}}),e._v(" "),n("div",{staticClass:"my-4"},[n("v-switch",{attrs:{label:"Lemma"},model:{value:e.isLemma,callback:function(t){e.isLemma=t},expression:"isLemma"}})],1),e._v(" "),n("div",{staticClass:"mt-4"},[n("v-btn",{staticClass:"ma-1",attrs:{small:""},on:{click:function(t){e.hierarchical=!1}}},[e._v("hierarchicalを使用しない")]),e._v(" "),n("v-btn",{staticClass:"ma-1",attrs:{small:""},on:{click:function(t){e.hierarchical=!0}}},[e._v("hierarchicalを使用する")]),e._v(" "),n("v-btn",{staticClass:"ma-1",attrs:{small:""},on:{click:function(t){e.sortMethod="directed"}}},[e._v("directed")]),e._v(" "),n("v-btn",{staticClass:"ma-1",attrs:{small:""},on:{click:function(t){e.sortMethod="hubsize"}}},[e._v("hubsize")]),e._v(" "),n("v-btn",{staticClass:"ma-1",attrs:{small:""},on:{click:function(t){e.physicsEnabled=!0}}},[e._v("physicsを使用する")]),e._v(" "),n("v-btn",{staticClass:"ma-1",attrs:{small:""},on:{click:function(t){e.physicsEnabled=!1}}},[e._v("physicsを使用しない")])],1)],1)}),[],!1,null,null,null);t.default=component.exports;h()(component,{VBtn:m.a,VSwitch:y.a})}}]);