(window.webpackJsonp=window.webpackJsonp||[]).push([[31,9,10,13,15],{480:function(t,e,n){"use strict";n.r(e);var r=n(19),o=(n(72),n(74),n(79),n(115)),c=n.n(o),l={props:{id:{type:String,require:!0,default:""}},data:function(){return{baseUrl:"https://nakamura196.github.io/ogawa",text:""}},computed:{},watch:{},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o,l,d,f,m,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$utils.getIdFromUri(t.id),e.next=3,c.a.get(t.baseUrl+"/xml/BG_1_TEI.xml");case 3:for(m in r=e.sent,o=new window.DOMParser,l=o.parseFromString(r.data,"text/xml"),d=t.$utils.getWordListByFactoid(l,n),f=[],d)h=l.querySelector("w[*|id='".concat(m,"']")).textContent.trim(),f.push(h);t.text=f.join(" ");case 10:case"end":return e.stop()}}),e)})))()},methods:{}},d=n(71),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",[t._v("\n  "+t._s(t.text)+"\n")])}),[],!1,null,null,null);e.default=component.exports},481:function(t,e,n){"use strict";n.r(e);n(35),n(18),n(26),n(43),n(33),n(5),n(44),n(49),n(34);var r=n(19);n(72),n(27),n(79),n(41),n(211),n(51),n(30),n(65);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,d=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){d=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(d)throw o}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var l={components:{network:n(472).a},props:{id:{type:String,require:!0,default:""}},data:function(){return{isLemma:!0,sortMethod:"directed",hierarchical:!1,physicsEnabled:!0,orgNodes:[],orgEdges:[],nodes:[],edges:[],nodesMap:{}}},computed:{options:function(){var t=!1;return this.hierarchical&&(t={sortMethod:this.sortMethod}),{edges:{length:400},layout:{randomSeed:2,hierarchical:t},physics:{enabled:this.physicsEnabled}}}},watch:{isLemma:function(){this.drawNetwork()},id:function(){this.getRelatedFactoids()}},mounted:function(){this.getRelatedFactoids()},methods:{getRelatedFactoids:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,c,l,data,d,f,m,h,y,v,x,w,_,j,k,O,i,E,R,C,I,F,S,A,T,N,P;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,"https://dydra.com/junjun7613/romanfactoid_v3/sparql",r="prefix ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n      prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n      SELECT * WHERE {\n        ?s ex:description ?desc_s .\n        OPTIONAL {\n          ?s ?related_so ?s_o .\n          {\n            ?s_o ex:referencesEntityInContext ?entityInContext_s; ex:referencesEntity ?referencesEntity_s .\n          }\n          UNION\n          {\n            ?s_o ex:referencesEntity ?referencesEntity_s .\n          }\n          ?referencesEntity_s ex:name ?referencesEntityName_s; rdf:type ?referencesEntityType_s\n        }\n        OPTIONAL {\n          ?s ?p ?o .\n          ?o a/rdfs:subClassOf* ex:Factoid .\n          ?o ex:description ?desc_o .\n          OPTIONAL {\n            ?o ?related_oo ?o_o .\n            {\n              ?o_o ex:referencesEntityInContext ?entityInContext_o; ex:referencesEntity ?referencesEntity_o .\n            }\n            UNION\n            {\n              ?o_o ex:referencesEntity ?referencesEntity_o .\n            }\n            ?referencesEntity_o ex:name ?referencesEntityName_o; rdf:type ?referencesEntityType_o\n          }\n        }\n        filter (?s = <".concat(n,"> || ?o = <").concat(n,">)\n      }"),c="".concat("https://dydra.com/junjun7613/romanfactoid_v3/sparql","?query=").concat(encodeURIComponent(r)),e.next=6,t.$axios.get(c);case 6:l=e.sent,data=l.data,d={},f={},m=o(data),e.prev=11,m.s();case 13:if((h=m.n()).done){e.next=59;break}y=h.value,v=0,x=["s","o"];case 17:if(!(v<x.length)){e.next=56;break}if(w=x[v],_=y["referencesEntity_".concat(w)]){e.next=22;break}return e.abrupt("continue",53);case 22:for(j=y[w],k=y["desc_".concat(w)],O=[],20,i=0;i<k.length/20;i++)O.push(k.substr(20*i,20));if(d[j]||(d[j]={id:j,label:O.join("\n"),shape:"box",color:{background:"white"},type:"factoid"}),d[_]){e.next=49;break}E=null,R=null,C=y["referencesEntityType_".concat(w)],e.t0=C,e.next="https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Location"===e.t0?35:"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#Community"===e.t0?37:"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#ConceptualObject"===e.t0?40:"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#PhysicalObject"===e.t0?43:"https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Group"===e.t0?46:48;break;case 35:return E="#98fb98",e.abrupt("break",48);case 37:return E="red",R="square",e.abrupt("break",48);case 40:case 43:return E="yellow",R="diamond",e.abrupt("break",48);case 46:return E="orange",e.abrupt("break",48);case 48:d[_]={id:_,label:y["referencesEntityName_".concat(w)],color:E,shape:R,type:C};case 49:!(I=d[_]).context&&y["entityInContext_".concat(w)]&&(I.context=y["entityInContext_".concat(w)]),F="".concat(j,"-").concat(_),f[F]={from:j,to:_,arrows:"to",color:"gray"};case 53:v++,e.next=17;break;case 56:y.p&&!["https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#mentionedAsFollow"].includes(y.p)&&(f["".concat(y.s,"-").concat(y.o)]={from:y.s,to:y.o,label:t.$utils.getIdFromUri(y.p,"#"),arrows:"to",color:"gray"});case 57:e.next=13;break;case 59:e.next=64;break;case 61:e.prev=61,e.t1=e.catch(11),m.e(e.t1);case 64:return e.prev=64,m.f(),e.finish(64);case 67:return e.next=69,t.getAssociatedObjects(d,f);case 69:for(T in S=e.sent,d=S.nodesMap,f=S.edgesMap,A=[],d)A.push(d[T]);for(P in N=[],f)N.push(f[P]);t.orgEdges=N,t.orgNodes=A,t.nodesMap=d,t.drawNetwork();case 80:case"end":return e.stop()}}),e,null,[[11,61,64,67]])})))()},drawNetwork:function(){var t,e=this.orgEdges,n=this.orgNodes,r=[],c=[],l=[],d=this.isLemma,f=o(n);try{for(f.s();!(t=f.n()).done;){var m=t.value;(d||"lemma"!==m.type)&&(r.push(m),l.push(m.id))}}catch(t){f.e(t)}finally{f.f()}var h,y=o(e);try{for(y.s();!(h=y.n()).done;){var v=h.value,x=v.from,w=v.to;l.includes(x)&&l.includes(w)&&c.push(v)}}catch(t){y.e(t)}finally{y.f()}this.nodes=r,this.edges=c},getAssociatedObjects:function(t,e){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var c,l,filter,d,f,m,data,h,y,v,x,w,_,j,k,O,E,R,C,I,F,label;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(l in c=[],t)"factoid"===t[l].type&&c.push("?s = <".concat(l,">"));return filter=c.join(" || "),"https://dydra.com/junjun7613/romanfactoid_v3/sparql",d="prefix ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n      prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n      SELECT * WHERE {\n        ?s ex:associatedObject ?ao . ?ao ex:hasLemma/ex:referencesLemma ?lemma; a ?type .\n        filter (".concat(filter,")\n        SERVICE <https://dydra.com/i2k/lemmabank/sparql> {\n          ?lemma rdfs:label ?label .\n        }\n      }"),f="".concat("https://dydra.com/junjun7613/romanfactoid_v3/sparql","?query=").concat(encodeURIComponent(d)),r.next=8,n.$axios.get(f);case 8:m=r.sent,data=m.data,h={},y=o(data);try{for(y.s();!(v=y.n()).done;)x=v.value,w=x.label,_=x.ao,j=x.s,h[j]||(h[j]={}),h[j][_]||(h[j][_]={type:x.type,labels:[]}),(k=h[j][_].labels).includes(w)||k.push(w)}catch(t){y.e(t)}finally{y.f()}for(E in O={"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#ConceptualObjectReference":{color:"pink",shape:"box"},"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#PhysicalObjectReference":{color:"gray",shape:"diamond"}},h)for(R in h[E])C=h[E][R],I=C.type,(F=C.labels).sort(),label=F.join(" / "),t[label]||(t[label]={id:label,label:label,color:O[I].color,shape:O[I].shape,type:"lemma"}),e["".concat(E,"-").concat(label)]={from:E,to:label,arrows:"to",color:"gray"};return r.abrupt("return",{nodesMap:t,edgesMap:e});case 16:case"end":return r.stop()}}),r)})))()},onNodeSelected:function(t){var e=t.nodes;if(e.length>0){var n=e[0],r=this.nodesMap[n];if("factoid"===r.type)this.$router.push(this.localePath({name:"item-id",params:{id:this.$utils.getIdFromUri(r.id).replace("fact_","")}}));else{if(!r.context)return void alert("contextがありません。");this.$router.push(this.localePath({name:"entity-id",params:{id:this.$utils.getIdFromUri(r.context)}}))}}}}},d=n(71),f=n(73),m=n.n(f),h=n(223),y=n(643),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("network",{ref:"network",staticClass:"mt-5",staticStyle:{width:"100%",height:"500px","background-color":"lightyellow"},attrs:{id:"mynetwork",nodes:t.nodes,edges:t.edges,options:t.options},on:{click:t.onNodeSelected}}),t._v(" "),n("div",{staticClass:"my-4"},[n("v-switch",{attrs:{label:"Lemma"},model:{value:t.isLemma,callback:function(e){t.isLemma=e},expression:"isLemma"}})],1),t._v(" "),n("div",{staticClass:"mt-4"},[n("v-btn",{staticClass:"ma-1",attrs:{small:""},on:{click:function(e){t.hierarchical=!1}}},[t._v("hierarchicalを使用しない")]),t._v(" "),n("v-btn",{staticClass:"ma-1",attrs:{small:""},on:{click:function(e){t.hierarchical=!0}}},[t._v("hierarchicalを使用する")]),t._v(" "),n("v-btn",{staticClass:"ma-1",attrs:{small:""},on:{click:function(e){t.sortMethod="directed"}}},[t._v("directed")]),t._v(" "),n("v-btn",{staticClass:"ma-1",attrs:{small:""},on:{click:function(e){t.sortMethod="hubsize"}}},[t._v("hubsize")]),t._v(" "),n("v-btn",{staticClass:"ma-1",attrs:{small:""},on:{click:function(e){t.physicsEnabled=!0}}},[t._v("physicsを使用する")]),t._v(" "),n("v-btn",{staticClass:"ma-1",attrs:{small:""},on:{click:function(e){t.physicsEnabled=!1}}},[t._v("physicsを使用しない")])],1)],1)}),[],!1,null,null,null);e.default=component.exports;m()(component,{VBtn:h.a,VSwitch:y.a})},486:function(t,e,n){"use strict";n.r(e);n(27);var r={props:{markers:{type:Array,require:!1,default:function(){return[]}},center:{type:Array,require:!1,default:function(){return[51.505,-.159]}},geojson:{type:Object,require:!1,default:function(){return null}}},data:function(){return{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:5}},computed:{options:function(){return{onEachFeature:this.onEachFeatureFunction}},onEachFeatureFunction:function(){return function(t,e){e.bindPopup('<div><a @click="search('.concat(t.properties.uri,')">').concat(t.properties.label,"</a></div>"))}}}},o=n(71),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("l-map",{staticStyle:{"z-index":"0",height:"600px",width:"100%"},attrs:{zoom:t.zoom,center:t.center}},[n("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),t._v(" "),t.geojson&&Object.keys(t.geojson).length>0?n("l-geo-json",{attrs:{geojson:t.geojson,options:t.options}}):t._e(),t._v(" "),t._l(t.markers,(function(marker,e){return n("l-marker",{key:e,attrs:{"lat-lng":marker.latLng}},[n("l-popup",[n("a",[t._v(t._s(marker.label))])])],1)}))],2)],1)}),[],!1,null,null,null);e.default=component.exports},501:function(t,e,n){"use strict";n.r(e);n(35),n(18),n(26),n(43),n(33),n(5),n(44),n(49),n(34);var r=n(19),o=(n(27),n(79),n(72),n(472),n(115)),c=n.n(o),l=n(481),d=n(480);function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var h={components:{FactoidNetwork:l.default,TeiText:d.default},props:{id:{type:String,require:!0,default:""}},data:function(){return{xml:"",geo:{},markers:[],center:[51.505,-.159],geojson:null,item:{}}},computed:{},watch:{id:function(){this.init()}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.init();case 1:case"end":return e.stop()}}),e)})))()},methods:{init:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getItem();case 2:t.getPlaceInfo();case 3:case"end":return e.stop()}}),e)})))()},getItem:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o,l,i,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://dydra.com/junjun7613/romanfactoid_v3/sparql",n=t.id,r="\n        prefix fpo: <https://github.com/johnBradley501/FPO/raw/master/fpo.owl#>\n        prefix owl: <http://www.w3.org/2002/07/owl#>\n        prefix ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n        select distinct * where {\n            ?s ex:description ?description .\n            filter (?s = <".concat("http://www.example.com/roman-ontology/resource/Factoid/"+n,"> ) .\n\n            optional {\n              { ?s ex:atWhere/ex:referencesEntity/owl:sameAs ?placeUri . }\n              UNION\n              { ?s ex:fromWhere/ex:referencesEntity/owl:sameAs ?placeUri . }\n              UNION\n              { ?s ex:toWhere/ex:referencesEntity/owl:sameAs ?placeUri . }\n              UNION\n              { ?s ex:nearWhere/ex:referencesEntity/owl:sameAs ?placeUri . }\n            }\n        }"),e.next=6,c.a.get("".concat("https://dydra.com/junjun7613/romanfactoid_v3/sparql","?query=").concat(encodeURIComponent(r)));case 6:for(o=e.sent.data,l={},i=0;i<o.length;i++){if(d=o[i],0===i){for(f in d)l[f]=d[f];l.placeUri=[]}l.placeUri.push(d.placeUri)}t.item=l;case 10:case"end":return e.stop()}}),e)})))()},getPlaceInfo:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l,d,m,h,y,data,v,x,w,_,j,k,marker,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.item,r=[],o=f(n.placeUri);try{for(o.s();!(c=o.n()).done;)l=c.value,r.push("?placeUri = <".concat(l,">"))}catch(t){o.e(t)}finally{o.f()}return d=r.join(" || "),"https://triplydb.com/_api/datasets/wouter/pleiades/services/pleiades/sparql",m="PREFIX geo: <http://www.opengis.net/ont/geosparql#>\n      PREFIX dct: <http://purl.org/dc/terms/>\n      PREFIX wgs84: <http://www.w3.org/2003/01/geo/wgs84_pos#>\n\n      PREFIX pleiades: <https://pleiades.stoa.org/places/vocab#>\n      PREFIX osspatial: <http://data.ordnancesurvey.co.uk/ontology/spatialrelations/>\n      PREFIX osgeo: <http://data.ordnancesurvey.co.uk/ontology/geometry/>\n\n      SELECT * WHERE {\n        ?placeUri dct:title ?title .\n        optional {\n          { ?placeUri wgs84:lat ?lat; wgs84:long ?long . }\n          UNION\n          { ?placeUri pleiades:hasLocation/osspatial:partiallyOverlaps/geo:hasGeometry/osgeo:asGeoJSON ?geo }\n        }\n        filter(".concat(d,")\n      }"),h="".concat("https://triplydb.com/_api/datasets/wouter/pleiades/services/pleiades/sparql","?query=").concat(encodeURIComponent(m)),e.next=10,t.$axios.get(h);case 10:if(y=e.sent,(data=y.data).length>0){v=[],x=[],w=[],_=f(data);try{for(_.s();!(j=_.n()).done;)(k=j.value).lat?(marker={latLng:[k.lat,k.long],label:k.title},x.push(marker),w=[k.lat,k.long]):v.push({type:"Feature",geometry:JSON.parse(k.geo),properties:{label:k.title,uri:k.placeUri}})}catch(t){_.e(t)}finally{_.f()}v.length>0&&(O={type:"FeatureCollection",features:v},t.geojson=O),x.length>0&&(t.markers=x,t.center=w)}case 13:case"end":return e.stop()}}),e)})))()}}},y=n(71),component=Object(y.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v(t._s(t.item.description)+" ("+t._s(t.$utils.createFactoidTitleFromId(t.id))+")")]),t._v(" "),t.xml?[n("h3",{staticClass:"mt-5"},[t._v("このFactoidの典拠")]),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.xml)}})]:t._e(),t._v(" "),n("hr",{staticClass:"my-10"}),t._v(" "),t.markers.length>0||t.geojson?n("Map",{attrs:{markers:t.markers,center:t.center,geojson:t.geojson}}):t._e(),t._v(" "),n("FactoidNetwork",{attrs:{id:t.item.s}}),t._v(" "),n("div",{staticClass:"mt-5"},[n("h2",[t._v("Text")]),t._v(" "),n("TeiText",{staticClass:"mt-2",attrs:{id:t.item.s}})],1)],2)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Map:n(486).default,FactoidNetwork:n(481).default,TeiText:n(480).default})},510:function(t,e,n){"use strict";n.r(e);n(84);var r=n(28),o=n(40),c=n(46),l=n(38),d=n(29),f=n(10),m=(n(13),n(26),n(167));function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var y=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},v=function(t){Object(c.a)(n,t);var e=h(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"getComponent",value:function(element){return"div"===element.name||"div1"===element.name?"div":"p"===element.name?"p":"span"}},{key:"wordAttributes",get:function(){return this.$store.getters.getWordAttributes}},{key:"entityAttributes",get:function(){return this.$store.getters.getEntityAttributes}},{key:"selectedFactoidIdOnText",get:function(){return this.$store.getters.getSelectedFactoidIdOnText},set:function(t){this.$store.commit("setSelectedFactoidIdOnText",t)}},{key:"selectedEntityIdOnText",get:function(){return this.$store.getters.getSelectedEntityIdOnText},set:function(t){this.$store.commit("setSelectedEntityIdOnText",t)}},{key:"hasSpanId",value:function(element){if(element.attributes){var t=element.attributes["xml:id"];return this.wordAttributes[t]}return!1}},{key:"getSpanId",value:function(element){if(element.attributes){var t=element.attributes["xml:id"];return this.wordAttributes[t]}return[]}},{key:"getTypeColor",value:function(t){return"Contact"===t?"#FFEE58":"FamilialRelationship"===t?"#42A5F5":"SocialRelationship"===t?"#66BB6A":"#BDBDBD"}},{key:"clickFactoid",value:function(t){this.selectedEntityIdOnText="",this.selectedFactoidIdOnText=t}},{key:"clickEntity",value:function(element){if(this.selectedFactoidIdOnText="",element.attributes){var t=element.attributes["xml:id"],e=this.entityAttributes[t];this.selectedEntityIdOnText=e}}}]),n}(m.Vue);y([Object(m.Prop)({})],v.prototype,"element",void 0);var x=v=y([Object(m.Component)({name:"TEI",components:{TEI:O}})],v),w=n(71),_=n(73),j=n.n(_),k=n(609),component=Object(w.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.getComponent(t.element),{tag:"component"},[t.element.text?[t._v("\n    "+t._s(t.element.text)+"\n  ")]:"w"===t.element.name?[t.hasSpanId(t.element)?[n("span",{staticStyle:{display:"inline-block"}},[t._l(t.element.elements,(function(t,e){return[n("TEI",{key:e,attrs:{element:t}})]})),t._v("\n         \n        "),t._l(t.getSpanId(t.element),(function(e,r){return n("v-tooltip",{key:"l-"+r,attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var o=r.on,c=r.attrs;return[n("div",t._g(t._b({staticStyle:{"margin-bottom":"4px",height:"8px",cursor:"pointer"},style:"background-color: "+t.getTypeColor(e.type),on:{click:function(n){return t.clickFactoid(e.id)}}},"div",c,!1),o))]}}],null,!0)},[t._v(" "),n("span",[t._v(t._s(e.note))])])}))],2)]:[n("span",[t._l(t.element.elements,(function(t,e){return[n("TEI",{key:e,attrs:{element:t}})]}))],2)]]:"persName"===t.element.name?[n("span",{staticStyle:{color:"red",cursor:"pointer"},on:{dblclick:function(e){return t.clickEntity(t.element)}}},[t._l(t.element.elements,(function(t,e){return[n("TEI",{key:e,attrs:{element:t}})]}))],2)]:"orgName"===t.element.name?[n("span",{staticStyle:{color:"green",cursor:"pointer"},on:{dblclick:function(e){return t.clickEntity(t.element)}}},[t._l(t.element.elements,(function(t,e){return[n("TEI",{key:e,attrs:{element:t}})]}))],2)]:"placeName"===t.element.name?[n("span",{staticStyle:{color:"blue",cursor:"pointer"},on:{dblclick:function(e){return t.clickEntity(t.element)}}},[t._l(t.element.elements,(function(t,e){return[n("TEI",{key:e,attrs:{element:t}})]}))],2)]:[t._l(t.element.elements,(function(t,e){return[n("TEI",{key:e,attrs:{element:t}})]}))]],2)}),[],!1,null,null,null),O=e.default=component.exports;j()(component,{TEI:n(510).default}),j()(component,{VTooltip:k.a})},511:function(t,e,n){"use strict";n.r(e);n(18),n(43),n(33),n(5),n(44),n(49),n(34);var r=n(19),o=(n(72),n(35),n(27),n(211),n(79),n(41),n(26),n(51),n(7),n(472));function c(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){d=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw o}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var d=function t(e,n){var r=[];if(e.length<n)return[];if(1===n)for(var i=0;i<e.length;i++)r[i]=[e[i]];else for(var o=0;o<e.length-n+1;o++)for(var c=t(e.slice(o+1),n-1),l=0;l<c.length;l++)r.push([e[o]].concat(c[l]));return r},f={components:{network:o.a},watch:{isLemma:function(){this.drawNetwork()},id:function(){this.init(this.id)}},props:{id:{type:String,require:!0,default:""}},data:function(){return{isLemma:!0,orgNodes:[],orgEdges:[],nodes:[],nodesMap:{},edgesMap:{},contexts:{},edges:[],options:{nodes:{borderWidth:1},edges:{color:"lightgray"}},dialog:!1,selectedContexts:{},item:{},endpoint:"https://dydra.com/junjun7613/romanfactoid_v3/sparql",timeoutId:null}},computed:{},mounted:function(){this.init(this.id)},methods:{init:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,data,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="\n      prefix fpo: <https://github.com/johnBradley501/FPO/raw/master/fpo.owl#>\n      prefix owl: <http://www.w3.org/2002/07/owl#>\n      prefix ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n      select distinct * where {\n          ?s ex:eventSince ?eventSince; ex:eventUntil ?eventUntil;\n            ex:contextualAspectOf ?entity .\n          filter (?s = <".concat(t,"> ) .\n          ?entity ex:name ?name; rdf:type ?typeOfEntity .\n          ?eventSince ex:description ?eventSinceDescription .\n          ?eventUntil ex:description ?eventUntilDescription .\n          optional { ?s ex:hasLocation/ex:sourceDescritpion ?locationDescription . }\n      }"),n.next=4,e.$axios.get("".concat(e.endpoint,"?query=").concat(encodeURIComponent(r)));case 4:o=n.sent,data=o.data,c=data[0],e.item=c,e.getRelations(t);case 9:case"end":return n.stop()}}),n)})))()},getRelations:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,filter,o,l,f,data,m,h,y,v,x,w,_,j,k,O,E,R,C,I,F,S,A,T,N,P,U,$,L,M,B,D,V,W,G,H,z,X,J;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.item,filter="?entityInContext = <".concat(t,">"),o="prefix ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n      SELECT DISTINCT *\n      WHERE {\n        ?entityInContext ex:contextualAspectOf ?entity0 .\n        ?entityReference ex:referencesEntityInContext ?entityInContext; ex:referencesEntity/rdf:type ?typeOfEntity .\n        filter (".concat(filter,") .\n        ?factoid ?hasReference ?entityReference .\n        ?hasReference rdfs:subPropertyOf* ?propertyClass .\n        filter (?propertyClass = ex:sceneObjectProperty || ?propertyClass = ex:sceneProperty).\n        ?factoid ?hasReference2 ?entityReference2 .\n        filter (?entityReference != ?entityReference2)\n        ?hasReference2 rdfs:subPropertyOf* ?propertyClass .\n        ?entityReference2 ex:referencesEntity ?entity; rdf:type ?typeOfEntityReference .\n        OPTIONAL {\n          ?entityReference2 ex:referencesEntityInContext ?entityInContext2 .\n          ?entityInContext2 rdf:type ?typeOfEntityInContext; ex:sourceDescription ?descriptionOfEntityInContext2 }\n        ?entity ex:name ?name; rdf:type ?typeOfEntity2 .\n      }"),l="".concat(e.endpoint,"?query=").concat(encodeURIComponent(o)),n.next=6,e.$axios.get(l);case 6:f=n.sent,data=f.data,m={},h={},t=data[0].entity0,h[t]=r,y=e.edgesMap,v=e.nodesMap,x=e.contexts,e.contexts=x,w=c(data);try{for(w.s();!(_=w.n()).done;)j=_.value,k=j.factoid,m[k]||(m[k]=[t]),O=m[k],E=j.entity,O.includes(E)||O.push(E),h[E]=j,j.entityInContext2&&(R=j.entityInContext2,x[E]||(x[E]={}),x[E][R]=j)}catch(t){w.e(t)}finally{w.f()}for(C in m){I=m[C],F=d(I,2),S=c(F);try{for(S.s();!(A=S.n()).done;){T=A.value,(N=[T[0],T[1]]).sort(),P=N.join("-"),y[P]||(y[P]={from:T[0],to:T[1],value:0}),U=c(T);try{for(U.s();!($=U.n()).done;)L=$.value,M=null,B=null,D=null,V=h[L].typeOfEntityReference,W="",W=L===t?h[L].typeOfEntity:h[L].typeOfEntity2,["https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#ConceptualObjectReference","https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#PhysicalObjectReference"].includes(V)?(M="yellow",B="diamond"):["https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#Community"].includes(W)?(M="red",B="square",D=W):["https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Person"].includes(W)?D=W:["https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Location"].includes(W)?(M="#98fb98",D=W):["https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Group"].includes(W)&&(M="orange",D=W),v[L]||(v[L]={id:L,label:h[L].name,color:M,shape:B,type:D})}catch(t){U.e(t)}finally{U.f()}}}catch(t){S.e(t)}finally{S.f()}}return n.next=21,e.getAssociatedObjects(v,y,m);case 21:for(X in G=n.sent,v=G.nodesMap,y=G.edgesMap,H=[],z=[],v)H.push(v[X]);for(J in y)z.push(y[J]);e.orgNodes=H,e.orgEdges=z,e.nodesMap=v,e.edgesMap=y,e.relations=data,e.drawNetwork();case 34:case"end":return n.stop()}}),n)})))()},drawNetwork:function(){var t,e=this.orgEdges,n=this.orgNodes,r=[],o=[],l=[],d=this.isLemma,f=c(n);try{for(f.s();!(t=f.n()).done;){var m=t.value;(d||"lemma"!==m.type)&&(r.push(m),l.push(m.id))}}catch(t){f.e(t)}finally{f.f()}var h,y=c(e);try{for(y.s();!(h=y.n()).done;){var v=h.value,x=v.from,w=v.to;l.includes(x)&&l.includes(w)&&o.push(v)}}catch(t){y.e(t)}finally{y.f()}this.nodes=r,this.edges=o},getAssociatedObjects:function(t,e,n){var o=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var l,d,filter,f,m,h,data,y,v,x,w,_,j,k,O,E,R,C,I,F,S,label,A,T,N,P;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(d in l=[],n)l.push("?s = <".concat(d,">"));return filter=l.join(" || "),"https://dydra.com/junjun7613/romanfactoid_v3/sparql",f="prefix ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n      prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n      SELECT * WHERE {\n        ?s ex:associatedObject ?ao . ?ao ex:hasLemma/ex:referencesLemma ?lemma; a ?type .\n        filter (".concat(filter,")\n        SERVICE <https://dydra.com/i2k/lemmabank/sparql> {\n          ?lemma rdfs:label ?label .\n        }\n      }"),m="".concat("https://dydra.com/junjun7613/romanfactoid_v3/sparql","?query=").concat(encodeURIComponent(f)),r.next=8,o.$axios.get(m);case 8:h=r.sent,data=h.data,y={},v=c(data);try{for(v.s();!(x=v.n()).done;)w=x.value,_=w.label,j=w.ao,k=w.s,y[k]||(y[k]={}),y[k][j]||(y[k][j]={type:w.type,lemma:w.lemma,labels:[]}),(O=y[k][j].labels).includes(_)||O.push(_)}catch(t){v.e(t)}finally{v.f()}for(R in E={"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#ConceptualObjectReference":{color:"pink",shape:"box"},"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#PhysicalObjectReference":{color:"gray",shape:"diamond"}},y)for(C in y[R]){I=y[R][C],F=I.type,(S=I.labels).sort(),label=S.join(" / "),t[label]||(t[label]={id:label,label:label,color:E[F].color,shape:E[F].shape,type:"lemma"}),A=n[R],T=c(A);try{for(T.s();!(N=T.n()).done;)P=N.value,e["".concat(P,"-").concat(label)]={from:P,to:label,arrows:"to",color:"gray"}}catch(t){T.e(t)}finally{T.f()}}return r.abrupt("return",{nodesMap:t,edgesMap:e});case 16:case"end":return r.stop()}}),r)})))()},onNodeSelected:function(t){var e=t.nodes;if(e.length>0){var n=e[0],r=this.nodesMap[n];["https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Person","https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Location","https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Group","https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#Community"].includes(r.type)&&(this.dialog=!0,this.selectedContexts=this.contexts[r.id])}this.onNodeDblClicked(t)},onNodeDblClicked:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,c,l,d,f,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((r=t.nodes).length>0)){n.next=15;break}if(o=r[0],c=e.nodesMap[o],!["https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Person","https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Location","https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Group","https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#Community"].includes(c.type)){n.next=15;break}if(!(l=e.contexts[c.id])){n.next=15;break}d=0,f=Object.keys(l);case 8:if(!(d<f.length)){n.next=15;break}return m=f[d],n.next=12,e.init(m);case 12:d++,n.next=8;break;case 15:case"end":return n.stop()}}),n)})))()}}},m=n(71),h=n(73),y=n.n(h),v=n(223),x=n(473),w=n(471),_=n(516),j=n(520),k=n(643),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("network",{ref:"network",staticClass:"mt-5",staticStyle:{width:"100%",height:"500px","background-color":"lightyellow"},attrs:{id:"mynetwork",nodes:t.nodes,edges:t.edges,options:t.options},on:{click:t.onNodeSelected}}),t._v(" "),n("div",{staticClass:"my-4"},[n("v-switch",{attrs:{label:"Lemma"},model:{value:t.isLemma,callback:function(e){t.isLemma=e},expression:"isLemma"}})],1),t._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[t._v(" Contexts ")]),t._v(" "),n("v-card-text",[n("ul",t._l(t.selectedContexts,(function(e,r){return n("li",{key:r,staticClass:"mt-4"},[n("nuxt-link",{attrs:{to:t.localePath({name:"entity-id",params:{id:t.$utils.getIdFromUri(r)}})}},[t._v(t._s(e.descriptionOfEntityInContext2))])],1)})),0)]),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n          Close\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;y()(component,{VBtn:v.a,VCard:x.a,VCardActions:w.a,VCardText:w.b,VCardTitle:w.c,VDialog:_.a,VSpacer:j.a,VSwitch:k.a})},597:function(t,e){},599:function(t,e){},639:function(t,e,n){"use strict";n.r(e);n(18),n(26),n(43),n(33),n(5),n(44),n(49),n(34);var r=n(19),o=(n(72),n(35),n(30),n(65),n(115)),c=n.n(o);function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var f=n(592),m={layout:"noFooter",data:function(){return{baseUrl:"https://nakamura196.github.io/ogawa",top:"https://nakamura196.github.io/ogawa/img/ogp/home.jpg",siteName:"Roman DB",element:null,height:window.innerHeight-64}},computed:{wordAttributes:{get:function(){return this.$store.getters.getWordAttributes},set:function(t){this.$store.commit("setWordAttributes",t)}},selectedFactoidIdOnText:{get:function(){return this.$store.getters.getSelectedFactoidIdOnText},set:function(t){this.$store.commit("setSelectedFactoidIdOnText",t)}},selectedEntityIdOnText:{get:function(){return this.$store.getters.getSelectedEntityIdOnText},set:function(t){this.$store.commit("setSelectedEntityIdOnText",t)}},entityAttributes:{get:function(){return this.$store.getters.getEntityAttributes},set:function(t){this.$store.commit("setEntityAttributes",t)}}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o,d,m,h,y,v,x,w,_,j,k,O,E,span,R,C,I,F,S,A,T,N,P,U,$,L,M,B,D,V,W,G,H,z;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get(t.baseUrl+"/xml/BG_1_TEI.xml");case 2:n=e.sent,r=new window.DOMParser,o=r.parseFromString(n.data,"text/xml"),console.log({xmlData:o}),d=JSON.parse(f.xml2json(o.querySelector("text").outerHTML,{compact:!1,spaces:4})),m=o.querySelectorAll("w"),console.log({ws:m}),h=[],y=l(m);try{for(y.s();!(v=y.n()).done;)x=v.value,w=x.getAttribute("xml:id"),h.push(w)}catch(t){y.e(t)}finally{y.f()}_=o.querySelector("spanGrp").querySelectorAll("span"),j={},k={},O=l(_),e.prev=16,O.s();case 18:if((E=O.n()).done){e.next=51;break}for(span=E.value,R=span.getAttribute("xml:id"),C=span.getAttribute("type"),I=span.getAttribute("from").slice(1),F=span.getAttribute("to").slice(1),S=h.indexOf(I),A=h.indexOf(F),T=span.querySelector("note").textContent,N=S;N<=A;N++)P=h[N],j[P]||(j[P]=[]),j[P].push({id:R,type:C,note:T});U=span.querySelectorAll("name"),$=l(U),e.prev=30,$.s();case 32:if((L=$.n()).done){e.next=41;break}if((M=L.value).getAttribute("corresp")){e.next=36;break}return e.abrupt("continue",39);case 36:B=M.querySelectorAll("ref"),D=l(B);try{for(D.s();!(V=D.n()).done;)"referencesEntityInContext"===(W=V.value).getAttribute("ana")&&(G=M.getAttribute("corresp").replace("#",""),H=W.getAttribute("target"),k[G]=H)}catch(t){D.e(t)}finally{D.f()}case 39:e.next=32;break;case 41:e.next=46;break;case 43:e.prev=43,e.t0=e.catch(30),$.e(e.t0);case 46:return e.prev=46,$.f(),e.finish(46);case 49:e.next=18;break;case 51:e.next=56;break;case 53:e.prev=53,e.t1=e.catch(16),O.e(e.t1);case 56:return e.prev=56,O.f(),e.finish(56);case 59:t.wordAttributes=j,t.entityAttributes=k,t.element=d,(z=t.$route.query.f_id)&&(t.selectedFactoidIdOnText=z);case 64:case"end":return e.stop()}}),e,null,[[16,53,56,59],[30,43,46,49]])})))()}},h=n(71),y=n(73),v=n.n(y),x=n(506),w=n(466),_=n(507),component=Object(h.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{style:"height: "+t.height+"px; overflow-y: auto"},[t.element?n("TEI",{attrs:{element:t.element}}):t._e()],1),t._v(" "),n("v-col",{style:"height: "+t.height+"px; overflow-y: auto"},[t.selectedFactoidIdOnText?n("FactoidBlock",{attrs:{id:t.selectedFactoidIdOnText}}):t._e(),t._v(" "),t.selectedEntityIdOnText?n("EntityNetwork",{attrs:{id:t.selectedEntityIdOnText}}):t._e()],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;v()(component,{TEI:n(510).default,FactoidBlock:n(501).default,EntityNetwork:n(511).default}),v()(component,{VCol:x.a,VContainer:w.a,VRow:_.a})}}]);