(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{461:function(e,t,n){"use strict";n.r(t);n(19),n(45),n(33),n(5),n(46),n(48),n(34);var o=n(18),r=(n(70),n(35),n(25),n(39),n(26),n(57),n(462));function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,f=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){f=!0,r=e},f:function(){try{c||null==n.return||n.return()}finally{if(f)throw r}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var f=function e(t,n){var o=[];if(t.length<n)return[];if(1===n)for(var i=0;i<t.length;i++)o[i]=[t[i]];else for(var r=0;r<t.length-n+1;r++)for(var c=e(t.slice(r+1),n-1),l=0;l<c.length;l++)o.push([t[r]].concat(c[l]));return o},d={components:{network:r.a},props:{item:{type:Object,require:!0,default:function(){}}},data:function(){return{nodes:[],nodesMap:{},edges:[],options:{nodes:{borderWidth:1},edges:{color:"lightgray"}}}},computed:{},mounted:function(){this.getRelations()},methods:{getRelations:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,r,l,data,d,y,h,m,x,v,C,R,w,j,_,I,F,O,E,k,S,P,A,$,M,N,T,U,J,W,D,H,L,z;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.item,"https://dydra.com/junjun7613/romanfactoid_v2/sparql",o="prefix ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n      SELECT DISTINCT *\n      WHERE {\n        ?entityReference ex:referencesEntityInContext ?entityInContext .\n        filter (?entityInContext = <".concat(n.s,">) .\n        ?factoid ?hasReference ?entityReference .\n        ?hasReference rdfs:subPropertyOf* ?propertyClass .\n        filter (?propertyClass = ex:sceneObjectProperty || ?propertyClass = ex:sceneProperty).\n        ?factoid ?hasReference2 ?entityReference2 .\n        filter (?entityReference != ?entityReference2)\n        ?hasReference2 rdfs:subPropertyOf* ?propertyClass .\n        ?entityReference2 ex:referencesEntity ?entity; rdf:type ?typeOfEntityReference .\n        optional { ?entityReference2 ex:referencesEntityInContext ?entityInContext2 . ?entityInContext2 rdf:type ?typeOfEntityInContext }\n        ?entity ex:name ?name .\n      }"),r="".concat("https://dydra.com/junjun7613/romanfactoid_v2/sparql","?query=").concat(encodeURIComponent(o)),t.next=6,e.$axios.get(r);case 6:l=t.sent,data=l.data,d={},(y={})[n.s]=n,h={},m={},x=c(data);try{for(x.s();!(v=x.n()).done;)C=v.value,R=C.factoid,d[R]||(d[R]=[n.s]),w=d[R],j=C.entityInContext2||C.entity,w.includes(j)||w.push(j),y[j]=C,C.entityInContext2&&(_=C.entityInContext2+" - "+C.entity,h[_]||(h[_]={from:C.entityInContext2,to:C.entity}),m[C.entity]||(m[C.entity]={id:C.entity,label:C.name,color:"green",shape:"diamond"}))}catch(e){x.e(e)}finally{x.f()}for(I in d){F=d[I],O=f(F,2),E=c(O);try{for(E.s();!(k=E.n()).done;){S=k.value,P=S[0]+"-"+S[1],h[P]||(h[P]={from:S[0],to:S[1],value:0}),h[P].value+=1,A=c(S);try{for(A.s();!($=A.n()).done;)M=$.value,N=null,T=null,U=null,J=y[M].typeOfEntityReference,W=y[M].typeOfEntityInContext,["https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#ConceptualObjectReference","https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#PhysicalObjectReference"].includes(J)?(N="yellow",T="diamond"):["https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#CommunityInContext"].includes(W)?(N="red",T="square",U=W):["https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#PersonInContext"].includes(W)&&(U=W),m[M]||(m[M]={id:M,label:y[M].name,color:N,shape:T,type:U})}catch(e){A.e(e)}finally{A.f()}}}catch(e){E.e(e)}finally{E.f()}}for(L in D=[],H=[],m)D.push(m[L]);for(z in h)H.push(h[z]);e.nodes=D,e.edges=H,e.nodesMap=m,e.relations=data;case 24:case"end":return t.stop()}}),t)})))()},onNodeSelected:function(e){var t=e.nodes;if(t.length>0){var n=t[0],o=this.nodesMap[n];if("https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#CommunityInContext"===o.type)alert("今後対応予定");else if("https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#PersonInContext"===o.type){var r=this.$utils.getIdFromUri(n);this.$router.push(this.localePath({name:"pers-id",params:{id:r}}))}}}}},y=n(96),component=Object(y.a)(d,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("network",{ref:"network",staticClass:"mt-5",staticStyle:{width:"100%",height:"650px","background-color":"lightyellow"},attrs:{id:"mynetwork",nodes:e.nodes,edges:e.edges,options:e.options},on:{click:e.onNodeSelected}})}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Network:n(461).default})}}]);