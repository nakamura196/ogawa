(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{465:function(e,t,n){"use strict";n.r(t);n(18),n(40),n(32),n(5),n(41),n(47),n(33);var o=n(19),r=(n(70),n(34),n(26),n(38),n(25),n(49),n(467));function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){d=!0,r=e},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw r}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var d=function e(t,n){var o=[];if(t.length<n)return[];if(1===n)for(var i=0;i<t.length;i++)o[i]=[t[i]];else for(var r=0;r<t.length-n+1;r++)for(var c=e(t.slice(r+1),n-1),l=0;l<c.length;l++)o.push([t[r]].concat(c[l]));return o},f={components:{network:r.a},props:{item:{type:Object,require:!0,default:function(){}}},data:function(){return{nodes:[],nodesMap:{},edges:[],options:{nodes:{borderWidth:1},edges:{color:"lightgray"}},contexts:{},dialog:!1,selectedContexts:{}}},computed:{},mounted:function(){this.getRelations()},methods:{getRelations:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,r,l,data,f,h,y,m,v,w,x,_,C,R,j,O,E,k,S,I,F,N,P,A,V,L,U,$,T,M,B,D,W,G,J;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.item,"https://dydra.com/junjun7613/romanfactoid_v3/sparql",o="prefix ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n      SELECT DISTINCT *\n      WHERE {\n        ?entityReference ex:referencesEntityInContext ?entityInContext; ex:referencesEntity/rdf:type ?typeOfEntity . \n        filter (?entityInContext = <".concat(n.s,">) .\n        ?factoid ?hasReference ?entityReference .\n        ?hasReference rdfs:subPropertyOf* ?propertyClass .\n        filter (?propertyClass = ex:sceneObjectProperty || ?propertyClass = ex:sceneProperty).\n        ?factoid ?hasReference2 ?entityReference2 .\n        filter (?entityReference != ?entityReference2)\n        ?hasReference2 rdfs:subPropertyOf* ?propertyClass .\n        ?entityReference2 ex:referencesEntity ?entity; rdf:type ?typeOfEntityReference .\n        OPTIONAL { \n          ?entityReference2 ex:referencesEntityInContext ?entityInContext2 . \n          ?entityInContext2 rdf:type ?typeOfEntityInContext; ex:sourceDescription ?descriptionOfEntityInContext2 }\n        ?entity ex:name ?name; rdf:type ?typeOfEntity2 . \n      }"),r="".concat("https://dydra.com/junjun7613/romanfactoid_v3/sparql","?query=").concat(encodeURIComponent(o)),t.next=6,e.$axios.get(r);case 6:l=t.sent,data=l.data,f={},(h={})[n.s]=n,y={},m={},v={},e.contexts=v,w=c(data);try{for(w.s();!(x=w.n()).done;)_=x.value,C=_.factoid,f[C]||(f[C]=[n.s]),R=f[C],j=_.entity,R.includes(j)||R.push(j),h[j]=_,_.entityInContext2&&(O=_.entityInContext2,v[j]||(v[j]={}),v[j][O]=_)}catch(e){w.e(e)}finally{w.f()}for(E in f){k=f[E],S=d(k,2),I=c(S);try{for(I.s();!(F=I.n()).done;){N=F.value,P=N[0]+"-"+N[1],y[P]||(y[P]={from:N[0],to:N[1],value:0}),y[P].value+=1,A=c(N);try{for(A.s();!(V=A.n()).done;)L=V.value,U=null,$=null,T=null,M=h[L].typeOfEntityReference,B="",B=L===n.s?h[L].typeOfEntity:h[L].typeOfEntity2,["https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#ConceptualObjectReference","https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#PhysicalObjectReference"].includes(M)?(U="yellow",$="diamond"):["https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#Community"].includes(B)?(U="red",$="square",T=B):["https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Person"].includes(B)?T=B:["https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Location"].includes(B)?(U="#98fb98",T=B):["https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Group"].includes(B)&&(U="orange",T=B),m[L]||(m[L]={id:L,label:h[L].name,color:U,shape:$,type:T})}catch(e){A.e(e)}finally{A.f()}}}catch(e){I.e(e)}finally{I.f()}}for(G in D=[],W=[],m)D.push(m[G]);for(J in y)W.push(y[J]);e.nodes=D,e.edges=W,e.nodesMap=m,e.relations=data;case 26:case"end":return t.stop()}}),t)})))()},onNodeSelected:function(e){var t=e.nodes;if(t.length>0){var n=t[0],o=this.nodesMap[n];["https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Person","https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Location","https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Group","https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#Community"].includes(o.type)&&(this.dialog=!0,this.selectedContexts=this.contexts[o.id])}}}},h=n(96),y=n(130),m=n.n(y),v=n(217),w=n(466),x=n(464),_=n(486),C=n(487),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("network",{ref:"network",staticClass:"mt-5",staticStyle:{width:"100%",height:"650px","background-color":"lightyellow"},attrs:{id:"mynetwork",nodes:e.nodes,edges:e.edges,options:e.options},on:{click:e.onNodeSelected}}),e._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[e._v(" Contexts ")]),e._v(" "),n("v-card-text",[n("ul",e._l(e.selectedContexts,(function(t,o){return n("li",{key:o,staticClass:"mt-4"},[n("nuxt-link",{attrs:{to:e.localePath({name:"entity-id",params:{id:e.$utils.getIdFromUri(o)}})}},[e._v(e._s(t.descriptionOfEntityInContext2))])],1)})),0)]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("\n          Close\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;m()(component,{Network:n(465).default}),m()(component,{VBtn:v.a,VCard:w.a,VCardActions:x.a,VCardText:x.b,VCardTitle:x.c,VDialog:_.a,VSpacer:C.a})},533:function(e,t,n){var content=n(573);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(22).default)("697f26b8",content,!0,{sourceMap:!1})},572:function(e,t,n){"use strict";n(533)},573:function(e,t,n){var o=n(21)(!1);o.push([e.i,"#mynetwork{border:1px solid #d3d3d3}",""]),e.exports=o},619:function(e,t,n){"use strict";n.r(t);n(34),n(18),n(25),n(40),n(32),n(5),n(41),n(47),n(33);var o=n(19),r=(n(70),n(38),n(49),n(27),n(65),n(26),n(50),n(467));function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){d=!0,r=e},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw r}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var d="https://dydra.com/junjun7613/romanfactoid_v2/sparql",f="https://dydra.com/junjun7613/hutimeperiod/sparql";function h(e){var t=e.split("/");return t[t.length-1]}function y(e,t){var n,o=[],r=[],l={},d=["s","o"],f={},y={},v=c(e);try{for(v.s();!(n=v.n()).done;){var w,x=n.value,_=c(d);try{for(_.s();!(w=_.n()).done;){var C=w.value,R=x[C],label=h(R)+"\n"+x["descOf"+C.toUpperCase()];if(!l[R]){var j={id:R,label:label,shape:"box",color:"#F44336",in:[],out:[]};o.push(j),l[R]=j}}}catch(e){_.e(e)}finally{_.f()}var O=x.s,E=x.o;f[O]||(f[O]=[]),f[O].push(E),r.push({from:O,to:E,arrows:{to:{enabled:!0}}});var k=l[O].out;k.includes(E)||k.push(E);var S=l[E].in;S.includes(O)||S.push(O)}}catch(e){v.e(e)}finally{v.f()}var I,F=[],N=[],P=[],A=c(m([],f,t));try{for(A.s();!(I=A.n()).done;){var V=I.value,L=l[V];if(L.y=50*F.length,F.push(L),y[V]){var U,$=c(y[V]);try{for($.s();!(U=$.n()).done;){var T=U.value,M=l[T];M.y=L.y,P.includes(T)||(N.push(M),P.push(T)),r.push({from:V,to:T,arrows:{to:{enabled:!0}}})}}catch(e){$.e(e)}finally{$.f()}}}}catch(e){A.e(e)}finally{A.f()}return{nodes:o=F.concat(N),edges:r,existsNodes:l}}function m(e,t,n){if(!t[n])return e;e.includes(n)||e.push(n);var o,r=t[n],l=c(r);try{for(l.s();!(o=l.n()).done;){var d=o.value;e.includes(d)||e.push(d)}}catch(e){l.e(e)}finally{l.f()}var f,h=c(r);try{for(h.s();!(f=h.n()).done;){e=m(e,t,f.value)}}catch(e){h.e(e)}finally{h.f()}return e}var v={components:{network:r.a},data:function(){return{baseUrl:"https://nakamura196.github.io/ogawa",loading:!1,nodes:[],edges:[],options:{nodes:{borderWidth:1},edges:{color:"lightgray",smooth:{forceDirection:"vertical"}},layout:{hierarchical:{direction:"UD",sortMethod:"directed",shakeTowards:"roots"}},physics:!1},title:this.$t("network"),nodeList:[],nodeStart:"",nodeEnd:"",nodeEntity:""}},head:function(){return{title:this.title}},watch:{nodeStart:function(){this.drawNetwork()},nodeEnd:function(){this.drawNetwork()},nodeEntity:function(){this.drawNetwork()}},mounted:function(){this.getFactList(),this.drawNetwork()},methods:{onNodeSelected:function(e){var t=e.nodes;if(t.length>0){var n=t[0];n.includes("fact_")&&this.$router.push(this.localePath({name:"item-id",params:{id:this.$utils.getIdFromUri(n).replace("fact_","")}}))}},drawNetwork:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,r,c,l,h,m,link,v,w,x,_,C;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,n=e.nodeEntity,o="\n      prefix ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n      prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n      select * where {\n        ?p a ?type;\n          ex:eventSince ?since;\n          ex:eventUntil ?until .\n\n        "+(n?"filter (?p = <".concat(n,">) . "):"")+"\n        ?type rdfs:subClassOf ex:EntityInContext .\n      }",t.next=5,e.$axios.get("".concat(d,"?query=").concat(encodeURIComponent(o)));case 5:return r=t.sent.data,c="",l="",n&&1===r.length?(h=r[0],c=h.since,l=h.until):(c=e.nodeStart,l=e.nodeEnd),m=c||"http://www.example.com/roman-ontology/resource/fact/fact_2",v="\n      prefix ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n      prefix ex2: <http://www.example.com/roman-ontology/resource/fact/>\n      select distinct * where {\n         ?startNode ".concat(link="ex:mentionedAsPrecedent","* ?s; ex:description ?descOfStartNode .\n         filter (?startNode = <")+m+">)\n         ?s ex:description ?descOfS .\n         optional {\n          ?s ex:when ?when_s .\n          SERVICE SILENT <".concat(f,"> {\n            optional { ?when_s ex:begin ?when_s_begin; ex:end ?when_s_end. }\n          }\n         }\n         ?s ").concat(link," ?o .\n         ?o ex:description ?descOfO .\n         optional {\n           ?o ex:when ?when_o .\n           SERVICE SILENT <").concat(f,"> {\n            optional { ?when_o ex:begin ?when_o_begin; ex:end ?when_o_end. }\n           }\n         }\n         ?o ").concat(link,"* ?endNode; ex:description ?descOfEndNode .\n         filter (?endNode = <")+(l||"http://www.example.com/roman-ontology/resource/fact/fact_40")+">)\n      }",t.next=14,e.$axios.get("".concat(d,"?query=").concat(encodeURIComponent(v)));case 14:w=t.sent.data,x=y(w,m),_=x.nodes,C=x.edges,e.nodes=_,e.edges=C,e.loading=!1;case 21:case"end":return t.stop()}}),t)})))()},getFactList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,r,l,f,data,y,m,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"\n      prefix ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n      select distinct * where {\n         ?s (ex:mentionedAsPrecedent | ex:therefore) ?o\n      }",t.next=3,e.$axios.get("".concat(d,"?query=").concat(encodeURIComponent("\n      prefix ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n      select distinct * where {\n         ?s (ex:mentionedAsPrecedent | ex:therefore) ?o\n      }")));case 3:n=t.sent.data,o=[{text:"",value:""}],r=[],l=c(n);try{for(l.s();!(f=l.n()).done;)for(data=f.value,y=0,m=["s","o"];y<m.length;y++)v=data[m[y]],r.includes(v)||(o.push({text:h(v),value:v}),r.push(v))}catch(e){l.e(e)}finally{l.f()}e.nodeList=o;case 9:case"end":return t.stop()}}),t)})))()}}},w=(n(572),n(96)),x=n(130),_=n.n(x),C=n(466),R=n(501),j=n(459),O=n(502),E=n(542),component=Object(w.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("h2",[e._v(e._s(e.title))]),e._v(" "),n("v-row",{staticClass:"mt-2",attrs:{align:"center"}},[n("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[n("v-select",{attrs:{items:e.nodeList,label:"始点",filled:"",rounded:"",dense:""},model:{value:e.nodeStart,callback:function(t){e.nodeStart=t},expression:"nodeStart"}})],1),e._v(" "),n("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[n("v-select",{attrs:{items:e.nodeList,label:"終点",filled:"",rounded:"",dense:""},model:{value:e.nodeEnd,callback:function(t){e.nodeEnd=t},expression:"nodeEnd"}})],1)],1),e._v(" "),n("v-row",[n("v-col",[n("network",{ref:"network",staticStyle:{width:"100%",height:"650px"},attrs:{id:"mynetwork",nodes:e.nodes,edges:e.edges,options:e.options},on:{click:e.onNodeSelected}})],1),e._v(" "),n("v-col",[n("v-card",{staticClass:"pa-10",attrs:{flat:"",outlined:""}},[e._v(" テキスト ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;_()(component,{Network:n(465).default}),_()(component,{VCard:C.a,VCol:R.a,VContainer:j.a,VRow:O.a,VSelect:E.a})}}]);