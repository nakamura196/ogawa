(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{481:function(e,t,n){"use strict";n.r(t);n(35),n(18),n(26),n(43),n(33),n(5),n(44),n(49),n(34);var o=n(19);n(73),n(27),n(79),n(41),n(211),n(51);function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,d=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return d=e.done,e},e:function(e){l=!0,r=e},f:function(){try{d||null==n.return||n.return()}finally{if(l)throw r}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var d={components:{network:n(472).a},props:{id:{type:String,require:!0,default:""}},data:function(){return{isLemma:!1,sortMethod:"hubsize",hierarchical:!0,physicsEnabled:!0,orgNodes:[],orgEdges:[],nodes:[],edges:[],nodesMap:{},isOption:!1}},computed:{options:function(){var e=!1;return this.hierarchical&&(e={sortMethod:this.sortMethod}),{edges:{length:400},layout:{randomSeed:2,hierarchical:e},physics:{enabled:this.physicsEnabled}}},selectedFactoidIdOnText:{get:function(){return this.$store.getters.getSelectedFactoidIdOnText},set:function(e){this.$store.commit("setSelectedFactoidIdOnText",e)}},selectedEntityIdOnText:{get:function(){return this.$store.getters.getSelectedEntityIdOnText},set:function(e){this.$store.commit("setSelectedEntityIdOnText",e)}}},watch:{isLemma:function(){this.drawNetwork()},id:function(){this.getRelatedFactoids()}},mounted:function(){this.getRelatedFactoids()},methods:{getRelatedFactoids:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,c,d,data,l,f,h,m,y,x,_,w,v,j,E,O,i,k,F,R,C,I,N,S,T,L,A,M;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.orgNodes=[],e.orgEdges=[],e.nodes=[],e.edge=[],e.nodesMap={},n=e.id,"https://dydra.com/junjun7613/romanfactoid_v3/sparql",o="prefix ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n      prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n      SELECT * WHERE {\n        ?s ex:description ?desc_s .\n        OPTIONAL {\n          ?s ?related_so ?s_o .\n          {\n            ?s_o ex:referencesEntityInContext ?entityInContext_s; ex:referencesEntity ?referencesEntity_s .\n          }\n          UNION\n          {\n            ?s_o ex:referencesEntity ?referencesEntity_s .\n          }\n          ?referencesEntity_s ex:name ?referencesEntityName_s; rdf:type ?referencesEntityType_s\n        }\n        OPTIONAL {\n          ?s ?p ?o .\n          ?o a/rdfs:subClassOf* ex:Factoid .\n          ?o ex:description ?desc_o .\n          OPTIONAL {\n            ?o ?related_oo ?o_o .\n            {\n              ?o_o ex:referencesEntityInContext ?entityInContext_o; ex:referencesEntity ?referencesEntity_o .\n            }\n            UNION\n            {\n              ?o_o ex:referencesEntity ?referencesEntity_o .\n            }\n            ?referencesEntity_o ex:name ?referencesEntityName_o; rdf:type ?referencesEntityType_o\n          }\n        }\n        filter (?s = <".concat(n,"> || ?o = <").concat(n,">)\n      }"),c="".concat("https://dydra.com/junjun7613/romanfactoid_v3/sparql","?query=").concat(encodeURIComponent(o)),t.next=11,e.$axios.get(c);case 11:d=t.sent,data=d.data,l={},f={},h=r(data),t.prev=16,h.s();case 18:if((m=h.n()).done){t.next=66;break}y=m.value,x=0,_=["s","o"];case 22:if(!(x<_.length)){t.next=63;break}if(w=_[x],v=y["referencesEntity_".concat(w)]){t.next=27;break}return t.abrupt("continue",60);case 27:for(j=y[w],E=y["desc_".concat(w)],O=[],20,i=0;i<E.length/20;i++)O.push(E.substr(20*i,20));if(l[j]||(l[j]={id:j,label:O.join("\n"),shape:"box",color:{background:"white",border:"white"},type:"factoid",shadow:!0}),l[v]){t.next=56;break}k=null,F="dot",R=y["referencesEntityType_".concat(w)],t.t0=R,t.next="https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Location"===t.t0?40:"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#Community"===t.t0?43:"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#ConceptualObject"===t.t0?46:"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#PhysicalObject"===t.t0?49:"https://github.com/johnBradley501/FPO/raw/master/fpo.owl#Group"===t.t0?52:55;break;case 40:return k="#98fb98",F="dot",t.abrupt("break",55);case 43:return k="red",F="dot",t.abrupt("break",55);case 46:case 49:return k="yellow",F="dot",t.abrupt("break",55);case 52:return k="orange",F="dot",t.abrupt("break",55);case 55:l[v]={id:v,label:y["referencesEntityName_".concat(w)],color:k,shape:F,type:R,shadow:!0,size:15};case 56:!(C=l[v]).context&&y["entityInContext_".concat(w)]&&(C.context=y["entityInContext_".concat(w)]),I="".concat(j,"-").concat(v),f[I]={from:j,to:v,arrows:"to",color:"gray"};case 60:x++,t.next=22;break;case 63:y.p&&!["https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#mentionedAsFollow"].includes(y.p)&&(N=e.$utils.getIdFromUri(y.p,"#"),f["".concat(y.s,"-").concat(y.o)]={from:y.s,to:y.o,label:N,arrows:"to",color:"gray"});case 64:t.next=18;break;case 66:t.next=71;break;case 68:t.prev=68,t.t1=t.catch(16),h.e(t.t1);case 71:return t.prev=71,h.f(),t.finish(71);case 74:return t.next=76,e.getAssociatedObjects(l,f);case 76:for(L in S=t.sent,l=S.nodesMap,f=S.edgesMap,T=[],l)T.push(l[L]);for(M in A=[],f)A.push(f[M]);e.orgEdges=A,e.orgNodes=T,e.nodesMap=l,e.drawNetwork();case 87:case"end":return t.stop()}}),t,null,[[16,68,71,74]])})))()},drawNetwork:function(){var e,t=this.orgEdges,n=this.orgNodes,o=[],c=[],d=[],l=this.isLemma,f=r(n);try{for(f.s();!(e=f.n()).done;){var h=e.value;(l||"lemma"!==h.type)&&(o.push(h),d.push(h.id))}}catch(e){f.e(e)}finally{f.f()}var m,y=r(t);try{for(y.s();!(m=y.n()).done;){var x=m.value,_=x.from,w=x.to;d.includes(_)&&d.includes(w)&&c.push(x)}}catch(e){y.e(e)}finally{y.f()}this.nodes=o,this.edges=c},getAssociatedObjects:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var c,d,filter,l,f,h,data,m,y,x,_,w,v,j,E,O,k,F,R,C,I,label;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(d in c=[],e)"factoid"===e[d].type&&c.push("?s = <".concat(d,">"));return filter=c.join(" || "),"https://dydra.com/junjun7613/romanfactoid_v3/sparql",l="prefix ex: <https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#>\n      prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n      SELECT * WHERE {\n        ?s ex:associatedObject ?ao . ?ao ex:hasLemma/ex:referencesLemma ?lemma; a ?type .\n        filter (".concat(filter,")\n        SERVICE <https://dydra.com/i2k/lemmabank/sparql> {\n          ?lemma rdfs:label ?label .\n        }\n      }"),f="".concat("https://dydra.com/junjun7613/romanfactoid_v3/sparql","?query=").concat(encodeURIComponent(l)),o.next=8,n.$axios.get(f);case 8:h=o.sent,data=h.data,m={},y=r(data);try{for(y.s();!(x=y.n()).done;)_=x.value,w=_.label,v=_.ao,j=_.s,m[j]||(m[j]={}),m[j][v]||(m[j][v]={type:_.type,labels:[]}),(E=m[j][v].labels).includes(w)||E.push(w)}catch(e){y.e(e)}finally{y.f()}for(k in O={"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#ConceptualObjectReference":{color:"pink"},"https://junjun7613.github.io/RomanFactoid_v2/Roman_Contextual_Factoid.owl#PhysicalObjectReference":{color:"gray"}},m)for(F in m[k])R=m[k][F],C=R.type,(I=R.labels).sort(),label=I.join(" / "),e[label]||(e[label]={id:label,label:label,color:O[C].color,shape:"dot",type:"lemma",shadow:!0,size:10}),t["".concat(k,"-").concat(label)]={from:k,to:label,arrows:"to",color:"gray"};return o.abrupt("return",{nodesMap:e,edgesMap:t});case 16:case"end":return o.stop()}}),o)})))()},onNodeSelected:function(e){var t=e.nodes;if(t.length>0){var n=t[0],o=this.nodesMap[n];if("factoid"===o.type)this.selectedFactoidIdOnText=this.$utils.getIdFromUri(o.id);else{if(!o.context)return void alert("contextがありません。");this.selectedEntityIdOnText=this.$utils.getIdFromUri(o.context)}}}}},l=n(71),f=n(72),h=n.n(f),m=n(223),y=n(646),component=Object(l.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mb-5"},[n("network",{ref:"network",staticClass:"mt-5",staticStyle:{width:"100%",height:"500px","background-color":"lightyellow"},attrs:{id:"mynetwork",nodes:e.nodes,edges:e.edges,options:e.options},on:{click:e.onNodeSelected}}),e._v(" "),n("div",{staticClass:"text-right"},[n("v-switch",{attrs:{label:"Option"},model:{value:e.isOption,callback:function(t){e.isOption=t},expression:"isOption"}})],1),e._v(" "),e.isOption?[n("div",{staticClass:"my-4"},[n("v-switch",{attrs:{label:"Lemma"},model:{value:e.isLemma,callback:function(t){e.isLemma=t},expression:"isLemma"}})],1),e._v(" "),e._e()]:e._e()],2)}),[],!1,null,null,null);t.default=component.exports;h()(component,{VBtn:m.a,VSwitch:y.a})}}]);